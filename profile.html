<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>E-commerce E2E - Perfil</title>
    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/variables.css" />
    <link rel="stylesheet" href="css/layout.css" />
    <link rel="stylesheet" href="css/components.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <header class="header" id="main-header" data-testid="main-header"></header>

    <main id="main-content" data-testid="main-content">
      <h1 data-testid="profile-title" style="margin-bottom: var(--spacing-lg)">
        Meu Perfil
      </h1>

      <div
        class="grid grid--cols-2"
        style="grid-template-columns: 1fr; gap: var(--spacing-lg)"
      >
        <aside
          class="card"
          style="
            padding: var(--spacing-lg);
            height: fit-content;
            max-width: 400px;
          "
        >
          <h3
            data-testid="profile-info-title"
            style="
              margin-bottom: var(--spacing-md);
              border-bottom: 1px solid var(--color-border);
              padding-bottom: var(--spacing-sm);
            "
          >
            Meus Dados
          </h3>
          <p>
            <strong data-testid="profile-name-label">Nome:</strong>
            <span id="profile-name" data-testid="profile-name"></span>
          </p>
          <p style="margin-top: var(--spacing-xs)">
            <strong data-testid="profile-email-label">E-mail:</strong>
            <span id="profile-email" data-testid="profile-email"></span>
          </p>
        </aside>

        <section class="card" style="padding: var(--spacing-lg)">
          <div
            style="
              display: flex;
              justify-content: space-between;
              align-items: center;
              border-bottom: 1px solid var(--color-border);
              margin-bottom: var(--spacing-md);
              padding-bottom: var(--spacing-sm);
            "
          >
            <h3 data-testid="profile-address-title" style="margin: 0">
              Meu Endereço
            </h3>
            <button
              id="profile-address-edit-btn"
              class="btn btn--outline"
              style="
                padding: var(--spacing-xs) var(--spacing-sm);
                font-size: var(--font-size-sm);
              "
              data-testid="profile-address-edit-btn"
            >
              Editar
            </button>
          </div>

          <div id="profile-address-view" data-testid="profile-address-view">
            <p
              data-testid="profile-address-empty"
              style="color: var(--color-text-light); display: none"
            >
              Você ainda não cadastrou um endereço.
            </p>
            <div
              id="profile-address-details"
              style="
                display: flex;
                flex-direction: column;
                gap: var(--spacing-xs);
              "
            >
              <p>
                <strong data-testid="profile-address-cep-label">CEP:</strong>
                <span
                  id="view-address-cep"
                  data-testid="view-address-cep"
                ></span>
              </p>
              <p>
                <strong data-testid="profile-address-street-label">Rua:</strong>
                <span
                  id="view-address-street"
                  data-testid="view-address-street"
                ></span>
              </p>
              <p>
                <strong data-testid="profile-address-city-state-label"
                  >Cidade/Estado:</strong
                >
                <span
                  id="view-address-city-state"
                  data-testid="view-address-city-state"
                ></span>
              </p>
              <p id="view-address-complement-wrapper">
                <strong data-testid="profile-address-complement-label"
                  >Complemento:</strong
                >
                <span
                  id="view-address-complement"
                  data-testid="view-address-complement"
                ></span>
              </p>
            </div>
          </div>

          <form
            id="profile-address-form"
            style="display: none"
            data-testid="profile-address-form"
          >
            <div
              class="grid grid--cols-2"
              style="margin-bottom: var(--spacing-sm)"
            >
              <div class="form-group">
                <label
                  for="address-cep"
                  class="form-label"
                  data-testid="address-cep-label"
                  >CEP</label
                >
                <input
                  type="text"
                  id="address-cep"
                  class="form-control"
                  data-testid="address-cep"
                  placeholder="41820-021"
                  maxlength="9"
                  required
                />
              </div>
              <div class="form-group">
                <label
                  for="address-street"
                  class="form-label"
                  data-testid="address-street-label"
                  >Rua</label
                >
                <input
                  type="text"
                  id="address-street"
                  class="form-control"
                  data-testid="address-street"
                  placeholder="Avenida Tancredo Neves"
                  required
                />
              </div>
            </div>
            <div
              class="grid grid--cols-2"
              style="margin-bottom: var(--spacing-sm)"
            >
              <div class="form-group">
                <label
                  for="address-city"
                  class="form-label"
                  data-testid="address-city-label"
                  >Cidade</label
                >
                <input
                  type="text"
                  id="address-city"
                  class="form-control"
                  data-testid="address-city"
                  placeholder="Salvador"
                  required
                />
              </div>
              <div class="form-group">
                <label
                  for="address-state"
                  class="form-label"
                  data-testid="address-state-label"
                  >Estado</label
                >
                <input
                  type="text"
                  id="address-state"
                  class="form-control"
                  data-testid="address-state"
                  maxlength="2"
                  placeholder="BA"
                  required
                />
              </div>
            </div>
            <div class="form-group" style="margin-bottom: var(--spacing-md)">
              <label
                for="address-complement"
                class="form-label"
                data-testid="address-complement-label"
                >Complemento (opcional)</label
              >
              <input
                type="text"
                id="address-complement"
                class="form-control"
                data-testid="address-complement"
                placeholder="Edifício Empresarial Bahia Prime, Sala 1203, Torre Business, 12º andar"
              />
            </div>
            <div
              style="
                display: flex;
                gap: var(--spacing-sm);
                justify-content: flex-end;
              "
            >
              <button
                type="button"
                id="profile-address-cancel-btn"
                class="btn btn--outline"
                data-testid="profile-address-cancel-btn"
              >
                Cancelar
              </button>
              <button
                type="submit"
                id="profile-address-save-btn"
                class="btn btn--primary"
                data-testid="profile-address-save-btn"
              >
                Salvar
              </button>
            </div>
          </form>
        </section>

        <section
          class="card"
          style="padding: var(--spacing-lg); grid-column: 1 / -1"
        >
          <h3
            data-testid="profile-history-title"
            style="
              margin-bottom: var(--spacing-md);
              border-bottom: 1px solid var(--color-border);
              padding-bottom: var(--spacing-sm);
            "
          >
            Histórico de Compras
          </h3>
          <div id="profile-orders-list" data-testid="profile-orders-list">
            <!-- Pedidos injetados pelo profile.js -->
          </div>
        </section>
      </div>
    </main>

    <footer class="footer" id="main-footer" data-testid="main-footer"></footer>
    <script type="module" src="js/utils/storage.js"></script>
    <script type="module" src="js/components/header.js"></script>
    <script type="module" src="js/components/footer.js"></script>
    <script type="module" src="js/pages/profile.js"></script>
  </body>
</html>
